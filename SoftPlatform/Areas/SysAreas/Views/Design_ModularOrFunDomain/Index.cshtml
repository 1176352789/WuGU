@model MyResponseBase

@{
    Layout = "~/Views/Shared/_LayoutDesign.cshtml";

    //var ModularOrFunCode = Model.ModularOrFunCode;
    //var modulars = ProjectCache.Design_ModularOrFuns.Where(p => p.ModularOrFunCode == ModularOrFunCode).FirstOrDefault();
    //var SearchMethod = modulars.SearchMethod;
    //if (string.IsNullOrEmpty(SearchMethod))
    //{
    //    SearchMethod = "Framework.FwSearch";
    //}

    List<TextValue> DomainTypeTemps = new List<TextValue>
    { 
        new TextValue{Text="====",Value=""},
        //new TextValue{Text="C#语句块(设置值、实例化对象等)",Value="101"},
        //new TextValue{Text="if",Value="81"},
        //new TextValue{Text="else",Value="82"},
        //new TextValue{Text="elseif",Value="83"},
        //new TextValue{Text="结束语句块",Value="84"},
        //new TextValue{Text="for",Value="85"},
        //new TextValue{Text="foreach",Value="87"},    
        //new TextValue{Text="自定义Sql-事务",Value="62"},
        //new TextValue{Text="自定义Sql-非事务",Value="63"},
        //new TextValue{Text="清空缓存",Value="65"},

        //new TextValue{Text="开始事务及try",Value="71"},
        //new TextValue{Text="结束事务及try",Value="72"},        
        //new TextValue{Text="提交事务",Value="73"},

        new TextValue{Text="构造函数",Value="1"},
        new TextValue{Text="主键不为空检查",Value="2"},
        
        //new TextValue{Text="不能重复",Value="6"},
        
        new TextValue{Text="列表查询",Value="11"},
        new TextValue{Text="列表查询--初始条件",Value="12"},
        new TextValue{Text="根据主键查询-显示",Value="13"},
        new TextValue{Text="根据主键查询-编辑",Value="14"},
        
        //new TextValue{Text="添加查询",Value="21"},
        new TextValue{Text="添加查询-带初始值",Value="22"},//添加查询-带外键初始

        new TextValue{Text="添加保存--事务",Value="23"},
        new TextValue{Text="编辑保存--事务",Value="26"},
        
        //new TextValue{Text="添加保存+子表",Value="41"},
        //new TextValue{Text="编辑保存+子表",Value="42"},
        new TextValue{Text="Merger",Value="51"},
        new TextValue{Text="事务及try模板",Value="53"},
        
        //new TextValue{Text="子表Merger",Value="52"},
    };

}

@section PageCssSection{
}

<div id='IndexP'>
    <div>
        <ul class="breadcrumb myjuxing">
            <li><span class="icon-home"></span><a href="/">首页</a></li>
            <li>设计管理</li>
        </ul>
    </div>
    @Html.Partial("Tab", Model)
    <div class='   '>
        <form>
            <div class="container-fluid margin-top-15">
                <div class='form-horizontal merge mastEditArea editArea'>
                    <input type='hidden' id=Item_Design_ModularOrFunID name='Item.Design_ModularOrFunID' value='@Model.Item.Design_ModularOrFunID' />
                    <ul class="form-horizontal merge ">
                        <li class="col-lg-4">
                            <div class="form-group">
                                <label class="col-lg-3 control-label">
                                    常用业务方法
                                </label>
                                <div class="col-lg-9">
                                    @Html.DropDownList("Item.DomainTypeTemp", DomainTypeTemps, "Value", "Text", "==业务步骤==")
                                </div>
                            </div>
                        </li>
                        <li class="col-lg-4">
                            <div class="form-group">
                                <label class="col-lg-3 control-label">
                                </label>
                                <div class="col-lg-9">
                                    <button class="btn  btn-primary btn-FwBtnSubmit"
                                        data-targetdom=""
                                        data-masteditarea=""
                                        data-childtableselect=""
                                        data-fun="300"
                                        data-tableselect=""
                                        data-pkname="Design_ModularOrFunID"
                                        data-posturl="/SysAreas/Design_ModularOrFunDomain/AddSaveMethod"
                                        data-targeturl="/SysAreas/Design_ModularOrFunDomain/Index?Item.Design_ModularOrFunID=@Model.Item.Design_ModularOrFunID"
                                        data-targeturlparamname=""
                                        type="button"
                                        >
                                        添加业务方法</button>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </form>
    </div>
    <div class="container-fluid margin-top-15">
        <div class='operArea' data-searchmethod='' data-url="">
            <div class="search-bar">
                <div class="tool-bar search-bar">
                    <div class="col-sm-8">
                        <a href="~/SysAreas/Design_ModularOrFunDomain/Add?Item.Design_ModularOrFunID=@Model.Item.Design_ModularOrFunID" class='btn btn-success'><span class='glyphicon glyphicon-plus'></span>新增</a>
                        <a href="~/SysAreas/Design_ModularOrFunDomain/BulidDomain?Item.Design_ModularOrFunID=@Model.Item.Design_ModularOrFunID" class='btn btn-success'>生成业务层文件</a>

                        <button class="btn  btn-primary btn-FwBtnSubmit"
                            data-targetdom=""
                            data-masteditarea=""
                            data-childtableselect=""
                            data-fun="300"
                            data-tableselect=""
                            data-pkname="Design_ModularOrFunDomainID"
                            data-posturl="/SysAreas/Design_ModularOrFunDomain/BulidRecord"
                            data-targeturl="/SysAreas/Design_ModularOrFunDomain/Index?Item.Design_ModularOrFunID=@Model.Item.Design_ModularOrFunID"
                            data-targeturlparamname="">
                            生成业务层记录</button>
                        <button class="btn  btn-primary btn-FwBtnSubmit"
                            data-targetdom=""
                            data-masteditarea=""
                            data-childtableselect=""
                            data-fun="121"
                            data-tableselect=""
                            data-pkname="Design_ModularOrFunDomainID"
                            data-posturl="/SysAreas/Design_ModularOrFunDomain/BulidRecordDomainRef"
                            data-targeturl="/SysAreas/Design_ModularOrFunDomain/EditList?Item.Design_ModularOrFunID=@Model.Item.Design_ModularOrFunID"
                            data-targeturlparamname="">
                            生成业务层记录(领域相关表)</button>
                    </div>
                    <div class="col-sm-10 text-right form-inline" id="SearchArea">
                    </div>
                </div>
            </div>
            <div style="clear: both; margin-bottom: 10px;"></div>
            <div class="scrollBar scrollBarAuto" style="width: 100%;" data-width="800">
                <div class="mylist container-fluid container" style="width: 100%;">
                    <table id='tbList' class="table table-bordered table-hover table-striped " style="width: 100%;">
                        <thead>
                            <tr>
                                <th>序号</th>
                                <th>操作</th>
                                <th>业务名称</th>
                                <th>方法名</th>
                                <th>排序</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{var i = 0;}
                            @foreach (var item in Model.Items)
                            {
                                <tr>
                                    <td>
                                        @(i + 1)
                                    </td>
                                    <td style="text-align: left;">
                                        
                                        <button class="btn btn-xs btn-primary btn-FwBtnSubmit" data-targetdom="" data-masteditarea="" data-childtableselect=""
                                             data-fun="300" data-tableselect="" data-pkname="Design_ModularOrFunDomainID" 
                                            data-posturl="/SysAreas/Design_ModularOrFunDomain/Delete?Item.Design_ModularOrFunDomainID=@item.Design_ModularOrFunDomainID" 
                                            data-targeturl="/SysAreas/Design_ModularOrFunDomain/Index?Item.Design_ModularOrFunID=@item.Design_ModularOrFunID" 
                                            data-targeturlparamname="">
                                            删除</button>
                                        <a href="~/SysAreas/Design_ModularOrFunDomain/Edit?Item.Design_ModularOrFunDomainID=@item.Design_ModularOrFunDomainID" class='btn btn-xs  btn-primary'>编辑</a>
                                    </td>
                                    <td style="text-align: left">@item.ModularOrFunDomainName</td>
                                    <td style="text-align: left">@item.MethodName</td>
                                    <td style="text-align: left">@item.Sort</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- 分页 -->
            <div class="page-bar">
            </div>
        </div>
    </div>
</div>
